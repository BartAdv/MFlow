<p style="word-wrap: break-word;"><span style="font-family: 'rebuchet MS', Helvetica, Arial, Verdana, sans-serif;">Now the new composable cache policies of MFlow permits the use of aggresive caching policies even for highly dynamic pages, since expressing cache directives is in the hands of the programmer of each particular widget, instead of HTTP gurus. The "separation of concern" precludes the synergies between components. A HTTP guru, probably in other department does not know for how long your particular data is valid. Neither you know if the HTTP guru will cache your fresh data in order to avoid loading the server, so you will add a random string to your data to avoid caching. In both cases, there is a opportunity lost for optimizing the load of the server without impairing the interaction,</span><br style="font-family: 'rebuchet MS', Helvetica, Arial, Verdana, sans-serif;"></p><p style="word-wrap: break-word;"><span style="font-family: 'rebuchet MS', Helvetica, Arial, Verdana, sans-serif;">What if you, the programmer of a widget can say to the page: "this widget present data that can be cached for 200 seconds, no matter if it is part of a page or if its data is sent trough Ajax". Or: "the user has logged-in so this page must be private, no matter the policies of the rest of the widgets".</span></p><p style="word-wrap: break-word;"><span style="font-family: 'rebuchet MS', Helvetica, Arial, Verdana, sans-serif;">What if the page can get all the cache policies of all the widgets and insert the most restrictive ones in the HTTP header?</span></p><p style="font-family: 'rebuchet MS', Helvetica, Arial, Verdana, sans-serif; word-wrap: break-word;">Then we would have a true separation of concern without impairing synergies.</p><p style="font-family: 'rebuchet MS', Helvetica, Arial, Verdana, sans-serif; word-wrap: break-word;">If the widget is refreshed using ajax, only the individual cache policy of the widget is taken into account. For example: IÂ´m logged here as editor, so Menu.hs detect this condition and mark the page as private. But If I click an autorefreshed widget which is not marked as private and have a maxAge directive, the menu options on the left, for example, then the menus can be cached within network proxies and CDNs, so other users can make use of these cached resources without compromising my privacy.</p><p style="word-wrap: break-word;"><font face="rebuchet MS, Helvetica, Arial, Verdana, sans-serif">Going this way, more synergies appear in unsuspected ways;&nbsp; What is the killer appication of the JavasCript frameworks? &nbsp;To present data sets without repeated&nbsp;accesses&nbsp;to the server using the new HTML5 cache</font><span style="font-family: 'rebuchet MS', Helvetica, Arial, Verdana, sans-serif;">. &nbsp;Now this can be done by caching AJAX responses in the good old HTTP cache, and make it work in any browser with or without javascript enabled.</span><br style="font-family: 'rebuchet MS', Helvetica, Arial, Verdana, sans-serif;"></p><p style="word-wrap: break-word;"><span style="font-family: 'rebuchet MS', Helvetica, Arial, Verdana, sans-serif;">Take for example dField:</span></p><p class="src" style="margin: 0.8em 0px; padding: 0.2em 0.5em; background-color: rgb(240, 240, 240); border-top-width: 1px; border-top-style: solid; border-top-color: rgb(204, 204, 204); line-height: 16.1200008392334px; font-size: 13px; font-family: monospace;"><a name="v:dField" class="def" style="margin: 0px; padding: 0px; font-weight: bold;">dField</a>&nbsp;:: (<a href="http://hackage.haskell.org/package/base-4.6.0.1/docs/Control-Monad.html#t:Monad" style="margin: 0px; padding: 0px; color: rgb(171, 105, 84);">Monad</a>&nbsp;m,&nbsp;<a href="http://hackage.haskell.org/package/MFlow-0.4.4/docs/MFlow-Forms-Internals.html#t:FormInput" style="margin: 0px; padding: 0px; color: rgb(171, 105, 84);">FormInput</a>&nbsp;view) =&gt;&nbsp;<a href="http://hackage.haskell.org/package/MFlow-0.4.4/docs/MFlow-Forms-Internals.html#t:View" style="margin: 0px; padding: 0px; color: rgb(171, 105, 84);">View</a>&nbsp;view m b -&gt;&nbsp;<a href="http://hackage.haskell.org/package/MFlow-0.4.4/docs/MFlow-Forms-Internals.html#t:View" style="margin: 0px; padding: 0px; color: rgb(171, 105, 84);">View</a>&nbsp;view m b<a href="http://hackage.haskell.org/package/MFlow-0.4.4/docs/src/MFlow-Forms-Widgets.html#dField" class="link" style="margin: 0px -0.5em 0px 0.5em; padding: 0px 0.5em 0.2em; font-size: 11px; color: rgb(145, 145, 145); float: right; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(145, 145, 145);">Source</a></p><div class="doc" style="margin: 0px; padding: 0px 0px 0px 2em; font-family: sans-serif; font-size: 13px; line-height: 18.200000762939453px; background-color: rgb(255, 255, 255);"><p style="margin: 0.8em 0px; padding: 0px;">Present a widget via AJAX if it is within a&nbsp;<code style="margin: 0px; padding: 0px; line-height: 16.1200008392334px;"><a href="http://hackage.haskell.org/package/MFlow-0.4.4/docs/MFlow-Forms-Widgets.html#v:witerate" style="margin: 0px; padding: 0px; color: rgb(171, 105, 84);">witerate</a></code>&nbsp;context. In the first iteration it present the widget surrounded by a placeholder. subsequent iterations will send just the javascript code necessary for refreshing of the placeholder.<span style="font-family: 'rebuchet MS', Helvetica, Arial, Verdana, sans-serif; font-size: 14px;">.</span></p></div><p style="word-wrap: break-word;"></p><p style="word-wrap: break-word;"><font face="arial"><span style="white-space: pre-wrap;">Take for example this code from this page</span></font></p><font face="arial"><span style="white-space: pre-wrap;"><a href="/noscript/templates/runtimetemplates/listnames" title="" target="">/noscript/templates/runtimetemplates/listnames</a>

It present data from the server. It uses witerate applied to a widget with four fields that are updated when one of two links are pressed trough AJAX. The placeholders updated are defined by dField.  The page as a whole is not updated. 
</span></font><font face="arial"><span style="white-space: pre-wrap;">
 
</span></font><pre style="word-wrap: break-word; white-space: pre-wrap;"><pre style="box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); line-height: 18px;"><div class="line" id="LC104" style="box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;<span class="n" style="box-sizing: border-box;">iterateResults</span> <span class="n" style="box-sizing: border-box;">allnames</span> <span class="n" style="box-sizing: border-box;">len</span> <span class="ow" style="box-sizing: border-box; font-weight: bold;">=</span> <span class="n" style="box-sizing: border-box;">pageFlow</span> <span class="s" style="box-sizing: border-box; color: rgb(221, 17, 68);">"iter"</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">$</span> <span class="n" style="box-sizing: border-box;">witerate</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">$</span> <span class="kr" style="box-sizing: border-box; font-weight: bold;">do</span></div><div class="line" id="LC105" style="font-family: Consolas, 'Liberation Mono', Courier, monospace; box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="kt" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">NextReg</span> <span class="n" style="box-sizing: border-box;">ind</span> <span class="ow" style="box-sizing: border-box; font-weight: bold;">&lt;-</span> <span class="n" style="box-sizing: border-box;">getSessionData</span> <span class="p" style="box-sizing: border-box;">`</span><span class="n" style="box-sizing: border-box;">onNothing</span><span class="p" style="box-sizing: border-box;">`</span> <span class="n" style="box-sizing: border-box;">return</span> <span class="p" style="box-sizing: border-box;">(</span><span class="kt" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">NextReg</span> <span class="mi" style="box-sizing: border-box; color: rgb(0, 153, 153);">0</span><span class="p" style="box-sizing: border-box;">)</span></div><div class="line" id="LC106" style="font-family: Consolas, 'Liberation Mono', Courier, monospace; box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n" style="box-sizing: border-box;">dField</span> <span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">getData</span>  <span class="n" style="box-sizing: border-box;">ind</span>    <span class="n" style="box-sizing: border-box;">len</span> <span class="n" style="box-sizing: border-box;">allnames</span><span class="p" style="box-sizing: border-box;">)</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">&lt;++</span> <span class="n" style="box-sizing: border-box;">br</span></div><div class="line" id="LC107" style="font-family: Consolas, 'Liberation Mono', Courier, monospace; box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n" style="box-sizing: border-box;">dField</span> <span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">getData</span> <span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">ind</span><span class="o" style="box-sizing: border-box; font-weight: bold;">+</span><span class="mi" style="box-sizing: border-box; color: rgb(0, 153, 153);">1</span><span class="p" style="box-sizing: border-box;">)</span> <span class="n" style="box-sizing: border-box;">len</span> <span class="n" style="box-sizing: border-box;">allnames</span><span class="p" style="box-sizing: border-box;">)</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">&lt;++</span> <span class="n" style="box-sizing: border-box;">br</span></div><div class="line" id="LC108" style="font-family: Consolas, 'Liberation Mono', Courier, monospace; box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n" style="box-sizing: border-box;">dField</span> <span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">getData</span> <span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">ind</span><span class="o" style="box-sizing: border-box; font-weight: bold;">+</span><span class="mi" style="box-sizing: border-box; color: rgb(0, 153, 153);">2</span><span class="p" style="box-sizing: border-box;">)</span> <span class="n" style="box-sizing: border-box;">len</span> <span class="n" style="box-sizing: border-box;">allnames</span><span class="p" style="box-sizing: border-box;">)</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">&lt;++</span> <span class="n" style="box-sizing: border-box;">br</span></div><div class="line" id="LC109" style="font-family: Consolas, 'Liberation Mono', Courier, monospace; box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n" style="box-sizing: border-box;">dField</span> <span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">getData</span> <span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">ind</span><span class="o" style="box-sizing: border-box; font-weight: bold;">+</span><span class="mi" style="box-sizing: border-box; color: rgb(0, 153, 153);">3</span><span class="p" style="box-sizing: border-box;">)</span> <span class="n" style="box-sizing: border-box;">len</span> <span class="n" style="box-sizing: border-box;">allnames</span><span class="p" style="box-sizing: border-box;">)</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">&lt;++</span> <span class="n" style="box-sizing: border-box;">br</span></div><div class="line" id="LC110" style="font-family: Consolas, 'Liberation Mono', Courier, monospace; box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n" style="box-sizing: border-box;">setSessionData</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">.</span> <span class="kt" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">NextReg</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">$</span> <span class="n" style="box-sizing: border-box;">next</span> <span class="n" style="box-sizing: border-box;">ind</span> <span class="n" style="box-sizing: border-box;">len</span></div><div class="line" id="LC111" style="font-family: Consolas, 'Liberation Mono', Courier, monospace; box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n" style="box-sizing: border-box;">r</span> <span class="ow" style="box-sizing: border-box; font-weight: bold;">&lt;-</span> <span class="n" style="box-sizing: border-box;">wlink</span> <span class="kt" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">True</span>  <span class="o" style="box-sizing: border-box; font-weight: bold;">&lt;&lt;</span> <span class="n" style="box-sizing: border-box;">b</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">&lt;&lt;</span> <span class="s" style="box-sizing: border-box; color: rgb(221, 17, 68);">"next"</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">&lt;++</span> <span class="n" style="box-sizing: border-box;">fromStr</span> <span class="s" style="box-sizing: border-box; color: rgb(221, 17, 68);">" "</span></div><div class="line" id="LC112" style="font-family: Consolas, 'Liberation Mono', Courier, monospace; box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o" style="box-sizing: border-box; font-weight: bold;">&lt;|&gt;</span></div><div class="line" id="LC113" style="font-family: Consolas, 'Liberation Mono', Courier, monospace; box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n" style="box-sizing: border-box;">wlink</span> <span class="kt" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">False</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">&lt;&lt;</span> <span class="n" style="box-sizing: border-box;">b</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">&lt;&lt;</span> <span class="s" style="box-sizing: border-box; color: rgb(221, 17, 68);">"prev"</span></div><div class="line" id="LC114" style="font-family: Consolas, 'Liberation Mono', Courier, monospace; box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n" style="box-sizing: border-box;">when</span> <span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">r</span><span class="o" style="box-sizing: border-box; font-weight: bold;">==</span> <span class="kt" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">False</span><span class="p" style="box-sizing: border-box;">)</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">$</span> <span class="n" style="box-sizing: border-box;">setSessionData</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">.</span> <span class="kt" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">NextReg</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">$</span>  <span class="n" style="box-sizing: border-box;">prev</span> <span class="n" style="box-sizing: border-box;">ind</span> <span class="n" style="box-sizing: border-box;">len</span></div></pre></pre><pre style="word-wrap: break-word; white-space: pre-wrap;"><span class="webkit-html-tag" style="font-size: medium;"><br></span></pre><font face="arial"><span style="white-space: pre-wrap;">
</span></font><span style="font-family: arial; white-space: pre-wrap;">
<span style="font-size: 14.545454025268555px;">The HTML code generated is as such:</span></span><font face="arial"><span style="white-space: pre-wrap;"><br></span></font><pre style="word-wrap: break-word; white-space: pre-wrap;"><span class="webkit-html-tag" style="font-size: medium;">&lt;div <span class="webkit-html-attribute-name">id</span>="<span class="webkit-html-attribute-value">p0iter</span>"&gt;</span></pre><pre style="word-wrap: break-word; white-space: pre-wrap;"><span class="webkit-html-tag" style="font-size: medium;">   &lt;span <span class="webkit-html-attribute-name">id</span>="<span class="webkit-html-attribute-value">p1iter</span>"&gt;</span><span style="font-size: medium;">a</span><span class="webkit-html-tag" style="font-size: medium;">&lt;/span&gt;</span><span class="webkit-html-tag" style="font-size: medium;">&lt;br&gt;</span></pre><pre style="word-wrap: break-word; white-space: pre-wrap;"><span class="webkit-html-tag" style="font-size: medium;">   &lt;span <span class="webkit-html-attribute-name">id</span>="<span class="webkit-html-attribute-value">p2iter</span>"&gt;</span><span style="font-size: medium;">b</span><span class="webkit-html-tag" style="font-size: medium;">&lt;/span&gt;</span><span class="webkit-html-tag" style="font-size: medium;">&lt;br&gt;</span></pre><pre style="word-wrap: break-word; white-space: pre-wrap;"><span class="webkit-html-tag" style="font-size: medium;">   &lt;span <span class="webkit-html-attribute-name">id</span>="<span class="webkit-html-attribute-value">p3iter</span>"&gt;</span><span style="font-size: medium;">c</span><span class="webkit-html-tag" style="font-size: medium;">&lt;/span&gt;</span><span class="webkit-html-tag" style="font-size: medium;">&lt;br&gt;</span></pre><pre style="word-wrap: break-word; white-space: pre-wrap;"><span class="webkit-html-tag" style="font-size: medium;">   &lt;span <span class="webkit-html-attribute-name">id</span>="<span class="webkit-html-attribute-value">p4iter</span>"&gt;</span><span style="font-size: medium;">d</span><span class="webkit-html-tag" style="font-size: medium;">&lt;/span&gt;</span><span class="webkit-html-tag" style="font-size: medium;">&lt;br&gt;</span></pre><pre style="word-wrap: break-word; white-space: pre-wrap;"><span class="webkit-html-tag" style="font-size: medium;">   &lt;span <span class="webkit-html-attribute-name">id</span>="<span class="webkit-html-attribute-value">p5iter</span>"&gt;</span><span class="webkit-html-tag" style="font-size: medium;">&lt;a <span class="webkit-html-attribute-name">href</span>="<a class="webkit-html-attribute-value webkit-html-external-link" target="_blank" href="http://localhost/noscript/templates/runtimetemplates/listnames/iter4">/noscript/templates/runtimetemplates/listnames/itert</a>rue"&gt;</span><span class="webkit-html-tag" style="font-size: medium;">&lt;b&gt;</span><span style="font-size: medium;">next</span><span class="webkit-html-tag" style="font-size: medium;">&lt;/b&gt;</span><span class="webkit-html-tag" style="font-size: medium;">&lt;/a&gt;</span><span style="font-size: medium;"> </span><span class="webkit-html-tag" style="font-size: medium;">&lt;/span&gt; </span></pre><pre style="word-wrap: break-word; white-space: pre-wrap;"><span class="webkit-html-tag" style="font-size: medium;">   &lt;span <span class="webkit-html-attribute-name">id</span>="<span class="webkit-html-attribute-value">p6iter</span>"&gt;</span><span class="webkit-html-tag" style="font-size: medium;">&lt;a <span class="webkit-html-attribute-name">href</span>="<a class="webkit-html-attribute-value webkit-html-external-link" target="_blank" href="http://localhost/noscript/templates/runtimetemplates/listnames/iter-4">/noscript/templates/runtimetemplates/listnames/iterf</a>alse"&gt;</span><span class="webkit-html-tag" style="font-size: medium;">&lt;b&gt;</span><span style="font-size: medium;">prev</span><span class="webkit-html-tag" style="font-size: medium;">&lt;/b&gt;</span><span class="webkit-html-tag" style="font-size: medium;">&lt;/a&gt;</span><span class="webkit-html-tag" style="font-size: medium;">&lt;/span&gt;</span><span class="webkit-html-tag" style="font-size: medium;">&lt;/div&gt;</span></pre><pre style="word-wrap: break-word; white-space: pre-wrap;"><span class="webkit-html-tag" style="font-size: medium;"><font face="arial" style="font-size: 14.545454025268555px; white-space: normal;"><span style="white-space: pre-wrap;">dField return a page with each new content for the placeholders, that is executed:
</span></font><pre style="word-wrap: break-word; white-space: pre-wrap;">setId('p1iter','e');
setId('p2iter','f');
setId('p3iter','g');
setId('p4iter','h');</pre><pre style="word-wrap: break-word; white-space: pre-wrap;"></pre><span style="font-size: 14.545454025268555px; font-family: arial;">However each click generates a request to the server. Even if the  request has been served already.  We can cache the javascript responses using the HTTP cache, so the above javascript code can be recovered locally when the user press the <i>prev </i>link.</span><font face="arial" style="font-size: 14.545454025268555px; white-space: normal;"><span style="white-space: pre-wrap;">
</span></font></span></pre><div><span class="webkit-html-tag" style="font-size: medium;"><span style="font-size: 14.545454025268555px; font-family: arial;">But if we tailor the caching policy for this widget behaviour, maybe we can not mix it with other widgets that demand a more strict or relaxed policy. We can not do it in a fully composable way if we rely on the raw HTTP headers. We need to fuse the caching policy inside the building block, the widget. then each widget will express its caching needs in the page and later a caching compiler will decide which caching policy is adequate for all the widgets in the page.&nbsp;</span></span></div><div><span class="webkit-html-tag" style="font-size: medium;"><span style="font-size: 14.545454025268555px; font-family: arial;"><br></span></span></div><div><span class="webkit-html-tag" style="font-size: medium;"><span style="font-size: 14.545454025268555px; font-family: arial;">For example, if for some reasons this widget is in a page with another widget that demand no caching at all, the compiler will obey this more restrictive policy. This widget will not benefit from caching but it will work well. Otherwise, the caching demand &nbsp;will be honored and the data presentation will work as optimally for the server load as a javascript framework with &nbsp;HTML5 cache would do, with the advantage that we use out well tested HTTP cache.</span></span></div><div><span class="webkit-html-tag" style="font-size: medium;"><span style="font-size: 14.545454025268555px; font-family: arial;"><br></span></span></div><div><span class="webkit-html-tag" style="font-size: medium;"><span style="font-size: 14.545454025268555px; font-family: arial;">Since this widget uses Ajax, his caching policy will not interfere with the other widgets. Only when the whole page is sent, in the first invocation or &nbsp;when Javascript is disabled, the whole page will be sent and the policies will be mixed.</span></span></div><div><span class="webkit-html-tag" style="font-size: medium;"><span style="font-size: 14.545454025268555px; font-family: arial;"><br></span></span></div><div><span class="webkit-html-tag" style="font-size: medium;"><span style="font-size: 14.545454025268555px; font-family: arial;">Additionally each chunk of responses will need to have its own distinctive link. If you look at the HTML generated in the original code, the URLs are two for all the chunks: true and false. Now we need to generate the link names dinamically, two different for each chunk since the HTTP cache distinguish each entry &nbsp;in the cache by the link URL.&nbsp;</span></span></div><div><span class="webkit-html-tag" style="font-size: medium;"><div class="line" id="LC120" style="color: rgb(51, 51, 51); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 14px; line-height: 18px; white-space: pre; box-sizing: border-box; padding-left: 10px; height: 18px;"><br></div></span></div><div><span class="webkit-html-tag" style="font-size: medium;"><span style="font-size: 14.545454025268555px; font-family: arial;">How? with dField:&nbsp;</span></span><span style="font-family: arial; font-size: 14.545454025268555px;">Here the two links have been enclosed in dField elements and now they return a dynamic content: the index of the next and previous set to present. Additionally a HTTP caching element has been added: They are HTTP cache control directives in the HTTP header, but in MFlow they are composable in the way I have mentioned above.</span></div><div><span style="font-family: arial; font-size: 14.545454025268555px;"><br></span></div><div><span style="font-family: arial; font-size: 14.545454025268555px;">In this case,&nbsp;</span><span class="n" style="color: rgb(51, 51, 51); font-family: Consolas, 'Liberation Mono', Courier, monospace; line-height: 18px; white-space: pre-wrap; box-sizing: border-box;">maxAge</span><span style="color: rgb(51, 51, 51); font-family: Consolas, 'Liberation Mono', Courier, monospace; line-height: 18px; white-space: pre-wrap;"> </span><span style="font-family: arial; font-size: 14.545454025268555px;">means that the content can be stored in the cache for 300 seconds. look at the&nbsp;<b>MFlow.Forms.Cache </b>module for the&nbsp;different cache control directives.</span><span style="font-family: arial; font-size: 14.545454025268555px;"><br></span></div><div><span style="font-family: arial; font-size: 14.545454025268555px;"><br></span></div><div><div class="line" id="LC108" style="color: rgb(51, 51, 51); font-family: Consolas, 'Liberation Mono', Courier, monospace; line-height: 18px; white-space: pre; box-sizing: border-box; padding-left: 10px; height: 18px;"><span class="n" style="box-sizing: border-box;">iterateResults</span> <span class="n" style="box-sizing: border-box;">allnames</span> <span class="n" style="box-sizing: border-box;">len</span> <span class="ow" style="box-sizing: border-box; font-weight: bold;">=</span> <span class="n" style="box-sizing: border-box;">pageFlow</span> <span class="s" style="box-sizing: border-box; color: rgb(221, 17, 68);">"iter"</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">.</span> <span class="n" style="box-sizing: border-box;">witerate</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">$</span> <span class="kr" style="box-sizing: border-box; font-weight: bold;">do</span></div><div class="line" id="LC109" style="color: rgb(51, 51, 51); font-family: Consolas, 'Liberation Mono', Courier, monospace; line-height: 18px; white-space: pre; box-sizing: border-box; padding-left: 10px; height: 18px;"><span style="white-space: pre-wrap;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="n" style="white-space: pre-wrap; box-sizing: border-box;">maxAge</span><span style="white-space: pre-wrap;"> </span><span class="mi" style="white-space: pre-wrap; box-sizing: border-box; color: rgb(0, 153, 153);">300</span><br></div><div class="line" id="LC111" style="color: rgb(51, 51, 51); font-family: Consolas, 'Liberation Mono', Courier, monospace; line-height: 18px; white-space: pre; box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kt" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">NextReg</span> <span class="n" style="box-sizing: border-box;">ind</span> <span class="ow" style="box-sizing: border-box; font-weight: bold;">&lt;-</span> <span class="n" style="box-sizing: border-box;">getSessionData</span> <span class="p" style="box-sizing: border-box;">`</span><span class="n" style="box-sizing: border-box;">onNothing</span><span class="p" style="box-sizing: border-box;">`</span> <span class="n" style="box-sizing: border-box;">return</span> <span class="p" style="box-sizing: border-box;">(</span><span class="kt" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">NextReg</span> <span class="mi" style="box-sizing: border-box; color: rgb(0, 153, 153);">0</span><span class="p" style="box-sizing: border-box;">)</span></div><div class="line" id="LC112" style="color: rgb(51, 51, 51); font-family: Consolas, 'Liberation Mono', Courier, monospace; line-height: 18px; white-space: pre; box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n" style="box-sizing: border-box;">dField</span> <span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">getData</span>  <span class="n" style="box-sizing: border-box;">ind</span>    <span class="n" style="box-sizing: border-box;">len</span> <span class="n" style="box-sizing: border-box;">allnames</span><span class="p" style="box-sizing: border-box;">)</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">&lt;++</span> <span class="n" style="box-sizing: border-box;">br</span></div><div class="line" id="LC113" style="color: rgb(51, 51, 51); font-family: Consolas, 'Liberation Mono', Courier, monospace; line-height: 18px; white-space: pre; box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n" style="box-sizing: border-box;">dField</span> <span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">getData</span> <span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">ind</span><span class="o" style="box-sizing: border-box; font-weight: bold;">+</span><span class="mi" style="box-sizing: border-box; color: rgb(0, 153, 153);">1</span><span class="p" style="box-sizing: border-box;">)</span> <span class="n" style="box-sizing: border-box;">len</span> <span class="n" style="box-sizing: border-box;">allnames</span><span class="p" style="box-sizing: border-box;">)</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">&lt;++</span> <span class="n" style="box-sizing: border-box;">br</span></div><div class="line" id="LC114" style="color: rgb(51, 51, 51); font-family: Consolas, 'Liberation Mono', Courier, monospace; line-height: 18px; white-space: pre; box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n" style="box-sizing: border-box;">dField</span> <span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">getData</span> <span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">ind</span><span class="o" style="box-sizing: border-box; font-weight: bold;">+</span><span class="mi" style="box-sizing: border-box; color: rgb(0, 153, 153);">2</span><span class="p" style="box-sizing: border-box;">)</span> <span class="n" style="box-sizing: border-box;">len</span> <span class="n" style="box-sizing: border-box;">allnames</span><span class="p" style="box-sizing: border-box;">)</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">&lt;++</span> <span class="n" style="box-sizing: border-box;">br</span></div><div class="line" id="LC115" style="color: rgb(51, 51, 51); font-family: Consolas, 'Liberation Mono', Courier, monospace; line-height: 18px; white-space: pre; box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n" style="box-sizing: border-box;">dField</span> <span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">getData</span> <span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">ind</span><span class="o" style="box-sizing: border-box; font-weight: bold;">+</span><span class="mi" style="box-sizing: border-box; color: rgb(0, 153, 153);">3</span><span class="p" style="box-sizing: border-box;">)</span> <span class="n" style="box-sizing: border-box;">len</span> <span class="n" style="box-sizing: border-box;">allnames</span><span class="p" style="box-sizing: border-box;">)</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">&lt;++</span> <span class="n" style="box-sizing: border-box;">br</span></div><div class="line" id="LC116" style="color: rgb(51, 51, 51); font-family: Consolas, 'Liberation Mono', Courier, monospace; line-height: 18px; white-space: pre; box-sizing: border-box; padding-left: 10px; height: 18px;"><span style="white-space: pre-wrap;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="n" style="white-space: pre-wrap; box-sizing: border-box;">r</span><span style="white-space: pre-wrap;"> </span><span class="ow" style="white-space: pre-wrap; box-sizing: border-box; font-weight: bold;">&lt;-</span><span style="white-space: pre-wrap;"> </span><span class="n" style="white-space: pre-wrap; box-sizing: border-box;">dField</span><span class="p" style="white-space: pre-wrap; box-sizing: border-box;">(</span><span class="n" style="white-space: pre-wrap; box-sizing: border-box;">wlink</span><span style="white-space: pre-wrap;"> </span><span class="p" style="white-space: pre-wrap; box-sizing: border-box;">(</span><span class="n" style="white-space: pre-wrap; box-sizing: border-box;">next</span><span style="white-space: pre-wrap;"> </span><span class="n" style="white-space: pre-wrap; box-sizing: border-box;">ind</span><span style="white-space: pre-wrap;"> </span><span class="n" style="white-space: pre-wrap; box-sizing: border-box;">len</span><span class="p" style="white-space: pre-wrap; box-sizing: border-box;">)</span><span style="white-space: pre-wrap;">  </span><span class="o" style="white-space: pre-wrap; box-sizing: border-box; font-weight: bold;">&lt;&lt;</span><span style="white-space: pre-wrap;"> </span><span class="n" style="white-space: pre-wrap; box-sizing: border-box;">b</span><span style="white-space: pre-wrap;"> </span><span class="o" style="white-space: pre-wrap; box-sizing: border-box; font-weight: bold;">&lt;&lt;</span><span style="white-space: pre-wrap;"> </span><span class="s" style="white-space: pre-wrap; box-sizing: border-box; color: rgb(221, 17, 68);">"next"</span><span style="white-space: pre-wrap;"> </span><span class="o" style="white-space: pre-wrap; box-sizing: border-box; font-weight: bold;">&lt;++</span><span style="white-space: pre-wrap;"> </span><span class="n" style="white-space: pre-wrap; box-sizing: border-box;">fromStr</span><span style="white-space: pre-wrap;"> </span><span class="s" style="white-space: pre-wrap; box-sizing: border-box; color: rgb(221, 17, 68);">" "</span><span class="p" style="white-space: pre-wrap; box-sizing: border-box;">)</span><br></div><div class="line" id="LC118" style="color: rgb(51, 51, 51); font-family: Consolas, 'Liberation Mono', Courier, monospace; line-height: 18px; white-space: pre; box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o" style="box-sizing: border-box; font-weight: bold;">&lt;|&gt;</span></div><div class="line" id="LC119" style="color: rgb(51, 51, 51); font-family: Consolas, 'Liberation Mono', Courier, monospace; line-height: 18px; white-space: pre; box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n" style="box-sizing: border-box;">dField</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">wlink</span> <span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">prev</span> <span class="n" style="box-sizing: border-box;">ind</span> <span class="n" style="box-sizing: border-box;">len</span><span class="p" style="box-sizing: border-box;">)</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">&lt;&lt;</span> <span class="n" style="box-sizing: border-box;">b</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">&lt;&lt;</span> <span class="s" style="box-sizing: border-box; color: rgb(221, 17, 68);">"prev"</span><span class="p" style="box-sizing: border-box;">)</span></div><div class="line" id="LC119" style="color: rgb(51, 51, 51); font-family: Consolas, 'Liberation Mono', Courier, monospace; line-height: 18px; white-space: pre; box-sizing: border-box; padding-left: 10px; height: 18px;"><span class="p" style="box-sizing: border-box;">               &lt;|&gt; restp</span></div><div class="line" id="LC120" style="color: rgb(51, 51, 51); font-family: Consolas, 'Liberation Mono', Courier, monospace; line-height: 18px; white-space: pre; box-sizing: border-box; padding-left: 10px; height: 18px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n" style="box-sizing: border-box;">setSessionData</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">.</span> <span class="kt" style="box-sizing: border-box; color: rgb(68, 85, 136); font-weight: bold;">NextReg</span> <span class="o" style="box-sizing: border-box; font-weight: bold;">$</span> <span class="n" style="box-sizing: border-box;">r</span></div></div><div><span style="font-family: arial; font-size: 14.545454025268555px;"><br></span></div><div><span style="font-family: arial; font-size: 14.545454025268555px;">But what does&nbsp;</span><span style="color: rgb(51, 51, 51); font-family: Consolas, 'Liberation Mono', Courier, monospace; line-height: 18px; white-space: pre;">restp? </span><span style="color: rgb(51, 51, 51); line-height: 18px; white-space: pre; font-size: 15px;"><font face="arial">It reads a rest path segment. The links </font></span><span style="color: rgb(221, 17, 68); font-family: Consolas, 'Liberation Mono', Courier, monospace; line-height: 18px; white-space: pre-wrap;">"next" </span><span style="color: rgb(51, 51, 51); line-height: 18px; white-space: pre; font-size: 15px;"><font face="arial">and </font></span><span class="s" style="font-family: Consolas, 'Liberation Mono', Courier, monospace; line-height: 18px; white-space: pre; box-sizing: border-box; color: rgb(221, 17, 68);">"prev" </span><span style="color: rgb(51, 51, 51); line-height: 18px; white-space: pre; font-size: 15px;"><font face="arial">expect two fixed numbers in the rest param corresponding to the next and previous index to be presented.&nbsp;The links generated, analogous to the HTML code presented above are:</font></span></div><div><pre style="word-wrap: break-word; white-space: pre-wrap;"><span class="webkit-html-tag" style="font-size: medium;">"<a class="webkit-html-attribute-value webkit-html-external-link" target="_blank" href="http://localhost/noscript/templates/runtimetemplates/listnames/iter4">/noscript/templates/runtimetemplates/listnames/</a>&lt;pageflow prefix&gt;&lt;next index&gt;"</span></pre><pre style="word-wrap: break-word; white-space: pre-wrap;"><span class="webkit-html-tag" style="font-size: medium;"><pre style="word-wrap: break-word; white-space: pre-wrap;"><span class="webkit-html-tag">"<a class="webkit-html-attribute-value webkit-html-external-link" target="_blank" href="http://localhost/noscript/templates/runtimetemplates/listnames/iter4">/noscript/templates/runtimetemplates/listnames/</a>&lt;pageflow prefix&gt;<u>&lt;previous index&gt;</u>"&gt;</span></pre></span></pre></div><div><span style="color: rgb(51, 51, 51); line-height: 18px; white-space: pre; font-size: 15px;"><font face="arial"><br></font></span></div><div><span style="color: rgb(51, 51, 51); line-height: 18px; white-space: pre; font-size: 15px;"><font face="arial">If the indexes do not match they fail. </font></span><span style="color: rgb(51, 51, 51); font-family: Consolas, 'Liberation Mono', Courier, monospace; line-height: 18px; white-space: pre;">restp </span><span style="color: rgb(51, 51, 51); line-height: 18px; white-space: pre; font-size: 15px;"><font face="arial">gets any index, since the request can come from a cached presentation that has been loaded in the browser and has been sent to the server, and this index can be whatever.</font></span></div><div><span style="color: rgb(51, 51, 51); line-height: 18px; white-space: pre; font-size: 15px;"><font face="arial"><br></font></span></div><div><span style="color: rgb(51, 51, 51); line-height: 18px; white-space: pre; font-size: 15px;"><font face="arial">The javascript generated in each iteration is cached in the browser's HTTP cache for 300 seconds. Not the javascript has two new entries corresponding to the dynamic links:</font></span></div><pre style="word-wrap: break-word; white-space: pre-wrap;"><pre style="box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Courier, monospace; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); line-height: 18px;"><div class="line" id="LC120" style="box-sizing: border-box; padding-left: 10px; height: 18px;"><span class="n" style="box-sizing: border-box;"><div style="color: rgb(0, 0, 0); font-family: 'rebuchet MS', Helvetica, Arial, Verdana, sans-serif; line-height: normal; white-space: normal;"><div><pre style="word-wrap: break-word; white-space: pre-wrap;">setId('p1iter','e');
setId('p2iter','f');
setId('p3iter','g');
setId('p4iter','h');
setId('p5iter','&lt;a href="/noscript/templates/runtimetemplates/listnames/iter8"&gt;&lt;b&gt;next&lt;/b&gt;&lt;/a&gt; ');
setId('p6iter','&lt;a href="/noscript/templates/runtimetemplates/listnames/iter0"&gt;&lt;b&gt;prev&lt;/b&gt;&lt;/a&gt;');</pre></div><div><span class="webkit-html-tag" style="font-size: medium;"><span style="font-size: 14.545454025268555px; font-family: arial;"><br></span></span></div><div><span class="webkit-html-tag" style="font-size: medium;"><span style="font-size: 14.545454025268555px; font-family: arial;">See also:&nbsp;</span></span><a href="http://localhost/noscript/cachedataset" title="" target="">Navigating an (infinite) dataset</a>&nbsp;</div></div><pre style="color: rgb(0, 0, 0); line-height: normal; word-wrap: break-word; white-space: pre-wrap;"><pre style="box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Courier, monospace; margin-top: 0px; margin-bottom: 0px; color: rgb(51, 51, 51); line-height: 18px;"></pre></pre></span></div></pre></pre><pre style="word-wrap: break-word; white-space: pre-wrap;"><br></pre>